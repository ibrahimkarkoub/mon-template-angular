<div class="div-main">
  <div class="title-page">
    <h2>Liste des Tahce</h2>

  </div>

  <div>
    <div style="display: flex; justify-content: right; padding: 30px;">

      <button pButton pRipple label="Ajouter" *ngIf="user?.role == 'ENTREPRISE'" (click)="openDialogAdd()" icon="pi pi-plus"
        class="p-button-success p-button-rounded"></button>
    </div>

    <p-table [value]="taches" [paginator]="true" [rows]="4" [showCurrentPageReport]="true"
      [tableStyle]="{ 'min-width': '50rem' }"
      currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
      [rowsPerPageOptions]="[4, 8, 12 , 16]">
      <ng-template pTemplate="header">
        <tr>
          <th>Createur</th>
          <th>Assigne</th>
          <th>Description</th>
          <th>Date Affectation</th>
          <th>Date Deadline</th>
          <th>Status</th>
          <th></th>
        </tr>

      </ng-template>
      <ng-template pTemplate="body" let-taches>
        <tr>
          <td>{{ taches.createur.firstName }} {{ taches.createur.lastName }}</td>
          <td>{{ taches.assigne.firstName }} {{ taches.assigne.lastName }}</td>
          <td>{{ taches.description }}</td>
          <td>{{ taches.dateAffectation | date: "yyyy-MM-dd HH:mm" }}</td>
          <td>{{ taches.dateDeadline | date: "yyyy-MM-dd HH:mm"}}</td>
          <td>{{ taches.status }}</td>
          <td>
            <button pButton *ngIf="user?.role == 'ENTREPRISE'" (click)="openDialogEdit(taches)" icon="pi pi-pencil" class="p-button-rounded"
              severity="secondary"></button>
            <button pButton icon="pi pi-trash" *ngIf="user?.role == 'ENTREPRISE'" style="margin-left: 2px;" (click)="delete(taches.id)"
              class="p-button-rounded p-button-danger" severity="secondary"></button>
            <button pButton icon="pi pi-check" style="margin-left: 2px;" *ngIf="taches.status == 'OUVERT' && user?.role == 'Employe'" (click)="cloturer(taches.id)"
              class="p-button-rounded p-button-success" severity="secondary"></button>
          </td>
        </tr>
      </ng-template>
    </p-table>

  </div>
</div>

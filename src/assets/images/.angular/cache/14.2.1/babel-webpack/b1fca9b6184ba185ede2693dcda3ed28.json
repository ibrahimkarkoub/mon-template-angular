{"ast":null,"code":"import _classCallCheck from \"C:/Users/MSI/Desktop/pfe/yas/angular/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Users/MSI/Desktop/pfe/yas/angular/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { HttpEventType, HttpResponse } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/core/services/rendezvous.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/core/services/fileUploadService\";\nimport * as i4 from \"@angular/common\";\n\nvar _c0 = function _c0(a0) {\n  return {\n    width: a0\n  };\n};\n\nfunction ConsultationComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14)(1, \"div\", 15);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    var ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(3, _c0, ctx_r0.progress + \"%\"));\n    i0.ɵɵattribute(\"aria-valuenow\", ctx_r0.progress);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.progress, \"% \");\n  }\n}\n\nfunction ConsultationComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.message, \" \");\n  }\n}\n\nfunction ConsultationComponent_ul_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\", 17)(1, \"li\", 18)(2, \"a\", 19);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    var file_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"href\", \"http://localhost:8081/download/\", file_r3, \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(file_r3);\n  }\n}\n\nexport var ConsultationComponent = /*#__PURE__*/function () {\n  function ConsultationComponent(rendezService, route, uploadService) {\n    _classCallCheck(this, ConsultationComponent);\n\n    this.rendezService = rendezService;\n    this.route = route;\n    this.uploadService = uploadService;\n    this.id = this.route.snapshot.params['id'];\n    this.progress = 0;\n    this.message = '';\n  }\n\n  _createClass(ConsultationComponent, [{\n    key: \"ngOnInit\",\n    value: function ngOnInit() {\n      this.getRendezVous();\n      this.fileInfos = this.uploadService.getFiles();\n    }\n  }, {\n    key: \"getRendezVous\",\n    value: function getRendezVous() {\n      var _this = this;\n\n      this.rendezService.rendezvousById(this.id).subscribe(function (res) {\n        _this.rendezVous = res;\n        console.log(_this.rendezVous);\n      });\n    }\n  }, {\n    key: \"selectFile\",\n    value: function selectFile(event) {\n      this.selectedFiles = event.target.files;\n    }\n  }, {\n    key: \"upload\",\n    value: function upload() {\n      var _this2 = this;\n\n      this.progress = 0;\n\n      if (this.selectedFiles) {\n        var file = this.selectedFiles.item(0);\n\n        if (file) {\n          this.currentFile = file;\n          this.uploadService.upload(this.currentFile, this.id).subscribe({\n            next: function next(event) {\n              if (event.type === HttpEventType.UploadProgress) {\n                _this2.progress = Math.round(100 * event.loaded / event.total);\n              } else if (event instanceof HttpResponse) {\n                _this2.message = event.body.message;\n                _this2.fileInfos = _this2.uploadService.getFiles();\n              }\n            },\n            error: function error(err) {\n              console.log(err);\n              _this2.progress = 0;\n\n              if (err.error && err.error.message) {\n                _this2.message = err.error.message;\n              } else {\n                _this2.message = 'Could not upload the file!';\n              }\n\n              _this2.currentFile = undefined;\n            }\n          });\n        }\n\n        this.selectedFiles = undefined;\n      }\n    }\n  }]);\n\n  return ConsultationComponent;\n}();\n\nConsultationComponent.ɵfac = function ConsultationComponent_Factory(t) {\n  return new (t || ConsultationComponent)(i0.ɵɵdirectiveInject(i1.RendezvousService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.FileUploadService));\n};\n\nConsultationComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ConsultationComponent,\n  selectors: [[\"app-consultation\"]],\n  decls: 19,\n  vars: 6,\n  consts: [[1, \"div-main\"], [1, \"title-page\"], [2, \"color\", \"#2eb165\"], [1, \"row\", 2, \"margin-top\", \"20px\"], [1, \"col-8\"], [1, \"btn\", \"btn-default\", \"p-0\"], [\"type\", \"file\", 1, \"form-control\", 3, \"change\"], [1, \"col-4\"], [1, \"btn\", \"btn-success\", \"btn-sm\", 3, \"disabled\", \"click\"], [\"class\", \"progress my-3\", 4, \"ngIf\"], [\"class\", \"alert alert-secondary\", \"role\", \"alert\", 4, \"ngIf\"], [1, \"card\", \"mt-3\"], [1, \"card-header\"], [\"class\", \"list-group list-group-flush\", 4, \"ngFor\", \"ngForOf\"], [1, \"progress\", \"my-3\"], [\"role\", \"progressbar\", \"aria-valuemin\", \"0\", \"aria-valuemax\", \"100\", 1, \"progress-bar\", \"progress-bar-info\", 3, \"ngStyle\"], [\"role\", \"alert\", 1, \"alert\", \"alert-secondary\"], [1, \"list-group\", \"list-group-flush\"], [1, \"list-group-item\"], [3, \"href\"]],\n  template: function ConsultationComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\", 2);\n      i0.ɵɵtext(3, \"Consultation details\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(4, \"div\")(5, \"div\", 3)(6, \"div\", 4)(7, \"label\", 5)(8, \"input\", 6);\n      i0.ɵɵlistener(\"change\", function ConsultationComponent_Template_input_change_8_listener($event) {\n        return ctx.selectFile($event);\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(9, \"div\", 7)(10, \"button\", 8);\n      i0.ɵɵlistener(\"click\", function ConsultationComponent_Template_button_click_10_listener() {\n        return ctx.upload();\n      });\n      i0.ɵɵtext(11, \" Upload \");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(12, ConsultationComponent_div_12_Template, 3, 5, \"div\", 9);\n      i0.ɵɵtemplate(13, ConsultationComponent_div_13_Template, 2, 1, \"div\", 10);\n      i0.ɵɵelementStart(14, \"div\", 11)(15, \"div\", 12);\n      i0.ɵɵtext(16, \"Download the file\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(17, ConsultationComponent_ul_17_Template, 4, 2, \"ul\", 13);\n      i0.ɵɵpipe(18, \"async\");\n      i0.ɵɵelementEnd()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"disabled\", !ctx.selectedFiles);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.currentFile);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.message);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(18, 4, ctx.fileInfos));\n    }\n  },\n  dependencies: [i4.NgForOf, i4.NgIf, i4.NgStyle, i4.AsyncPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJjb25zdWx0YXRpb24uY29tcG9uZW50LnNjc3MifQ== */\"]\n});","map":{"version":3,"mappings":";;AAAA,SAASA,aAAT,EAAwBC,YAAxB,QAA4C,sBAA5C;;;;;;;;;;;;;;;ICwBIC,gCAA+C,CAA/C,EAA+C,KAA/C,EAA+C,EAA/C;IASIA;IACFA;;;;;IAHEA;IAAAA;IAHAA;IAKAA;IAAAA;;;;;;IAIJA;IACEA;IACFA;;;;;IADEA;IAAAA;;;;;;IAKAA,+BAGC,CAHD,EAGC,IAHD,EAGC,EAHD,EAGC,CAHD,EAGC,GAHD,EAGC,EAHD;IAKwDA;IAAUA;;;;;IAA3DA;IAAAA;IAAiDA;IAAAA;;;;ADpC9D,WAAaC,qBAAb;EAGE,+BACUC,aADV,EAEUC,KAFV,EAGUC,aAHV,EAG0C;IAAA;;IAFhC;IACA;IACA;IALV,UAAK,KAAKD,KAAL,CAAWE,QAAX,CAAoBC,MAApB,CAA2B,IAA3B,CAAL;IAyBA,gBAAW,CAAX;IACA,eAAU,EAAV;EApBK;;EAPP;IAAA;IAAA,OASE,oBAAQ;MACN,KAAKC,aAAL;MACA,KAAKC,SAAL,GAAiB,KAAKJ,aAAL,CAAmBK,QAAnB,EAAjB;IACD;EAZH;IAAA;IAAA,OAeE,yBAAa;MAAA;;MACX,KAAKP,aAAL,CAAmBQ,cAAnB,CAAkC,KAAKC,EAAvC,EAA2CC,SAA3C,CAAqD,aAAG,EAAE;QACxD,KAAI,CAACC,UAAL,GAAkBC,GAAlB;QACAC,OAAO,CAACC,GAAR,CAAY,KAAI,CAACH,UAAjB;MAED,CAJD;IAKD;EArBH;IAAA;IAAA,OAmCE,oBAAWI,KAAX,EAAqB;MACnB,KAAKC,aAAL,GAAqBD,KAAK,CAACE,MAAN,CAAaC,KAAlC;IACD;EArCH;IAAA;IAAA,OAuCE,kBAAM;MAAA;;MACJ,KAAKC,QAAL,GAAgB,CAAhB;;MAEA,IAAI,KAAKH,aAAT,EAAwB;QACtB,IAAMI,IAAI,GAAgB,KAAKJ,aAAL,CAAmBK,IAAnB,CAAwB,CAAxB,CAA1B;;QAEA,IAAID,IAAJ,EAAU;UACR,KAAKE,WAAL,GAAmBF,IAAnB;UAEA,KAAKlB,aAAL,CAAmBqB,MAAnB,CAA0B,KAAKD,WAA/B,EAA6C,KAAKb,EAAlD,EAAsDC,SAAtD,CAAgE;YAC9Dc,IAAI,EAAE,cAACT,KAAD,EAAe;cACnB,IAAIA,KAAK,CAACU,IAAN,KAAe7B,aAAa,CAAC8B,cAAjC,EAAiD;gBAC/C,MAAI,CAACP,QAAL,GAAgBQ,IAAI,CAACC,KAAL,CAAW,MAAMb,KAAK,CAACc,MAAZ,GAAqBd,KAAK,CAACe,KAAtC,CAAhB;cACD,CAFD,MAEO,IAAIf,KAAK,YAAYlB,YAArB,EAAmC;gBACxC,MAAI,CAACkC,OAAL,GAAehB,KAAK,CAACiB,IAAN,CAAWD,OAA1B;gBACA,MAAI,CAACzB,SAAL,GAAiB,MAAI,CAACJ,aAAL,CAAmBK,QAAnB,EAAjB;cACD;YACF,CAR6D;YAS9D0B,KAAK,EAAE,eAACC,GAAD,EAAa;cAClBrB,OAAO,CAACC,GAAR,CAAYoB,GAAZ;cACA,MAAI,CAACf,QAAL,GAAgB,CAAhB;;cAEA,IAAIe,GAAG,CAACD,KAAJ,IAAaC,GAAG,CAACD,KAAJ,CAAUF,OAA3B,EAAoC;gBAClC,MAAI,CAACA,OAAL,GAAeG,GAAG,CAACD,KAAJ,CAAUF,OAAzB;cACD,CAFD,MAEO;gBACL,MAAI,CAACA,OAAL,GAAe,4BAAf;cACD;;cAED,MAAI,CAACT,WAAL,GAAmBa,SAAnB;YACD;UApB6D,CAAhE;QAsBD;;QAED,KAAKnB,aAAL,GAAqBmB,SAArB;MACD;IACF;EA1EH;;EAAA;AAAA;;;mBAAapC,uBAAqBD;AAAA;;;QAArBC;EAAqBqC;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCZlC1C,+BAAsB,CAAtB,EAAsB,KAAtB,EAAsB,CAAtB,EAAsB,CAAtB,EAAsB,IAAtB,EAAsB,CAAtB;MAE+BA;MAAoBA;MAGjDA,4BAAK,CAAL,EAAK,KAAL,EAAK,CAAL,EAAK,CAAL,EAAK,KAAL,EAAK,CAAL,EAAK,CAAL,EAAK,OAAL,EAAK,CAAL,EAAK,CAAL,EAAK,OAAL,EAAK,CAAL;MAI2BA;QAAA,OAAU2C,sBAAV;MAA4B,CAA5B;MAAnB3C;MAIJA,+BAAmB,EAAnB,EAAmB,QAAnB,EAAmB,CAAnB;MAIIA;QAAA,OAAS2C,YAAT;MAAiB,CAAjB;MAEA3C;MACFA;MAIJA;MAaAA;MAIAA,iCAAuB,EAAvB,EAAuB,KAAvB,EAAuB,EAAvB;MAC2BA;MAAiBA;MAC1CA;;MAQFA;;;;MAnCMA;MAAAA;MAQAA;MAAAA;MAaAA;MAAAA;MAQeA;MAAAA","names":["HttpEventType","HttpResponse","i0","ConsultationComponent","rendezService","route","uploadService","snapshot","params","getRendezVous","fileInfos","getFiles","rendezvousById","id","subscribe","rendezVous","res","console","log","event","selectedFiles","target","files","progress","file","item","currentFile","upload","next","type","UploadProgress","Math","round","loaded","total","message","body","error","err","undefined","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\MSI\\Desktop\\pfe\\yas\\angular\\src\\app\\modules\\rendervous\\consultation\\consultation.component.ts","C:\\Users\\MSI\\Desktop\\pfe\\yas\\angular\\src\\app\\modules\\rendervous\\consultation\\consultation.component.html"],"sourcesContent":["import { HttpEventType, HttpResponse } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { FileUploadService } from 'src/app/core/services/fileUploadService';\nimport { RendezvousService } from 'src/app/core/services/rendezvous.service';\n\n@Component({\n  selector: 'app-consultation',\n  templateUrl: './consultation.component.html',\n  styleUrls: ['./consultation.component.scss']\n})\nexport class ConsultationComponent implements OnInit {\n  id = this.route.snapshot.params['id']\n  rendezVous : any\n  constructor(\n    private rendezService : RendezvousService,\n    private route : ActivatedRoute,\n    private uploadService: FileUploadService\n  ) { }\n\n  ngOnInit(): void {\n    this.getRendezVous()\n    this.fileInfos = this.uploadService.getFiles();\n  }\n\n\n  getRendezVous(){\n    this.rendezService.rendezvousById(this.id).subscribe(res=>{\n      this.rendezVous = res\n      console.log(this.rendezVous);\n\n    })\n  }\n\n\n  selectedFiles?: FileList;\n  currentFile?: File;\n  progress = 0;\n  message = '';\n\n  fileInfos?: Observable<any>;\n\n\n\n\n\n  selectFile(event: any): void {\n    this.selectedFiles = event.target.files;\n  }\n\n  upload(): void {\n    this.progress = 0;\n\n    if (this.selectedFiles) {\n      const file: File | null = this.selectedFiles.item(0);\n\n      if (file) {\n        this.currentFile = file;\n\n        this.uploadService.upload(this.currentFile , this.id).subscribe({\n          next: (event: any) => {\n            if (event.type === HttpEventType.UploadProgress) {\n              this.progress = Math.round(100 * event.loaded / event.total);\n            } else if (event instanceof HttpResponse) {\n              this.message = event.body.message;\n              this.fileInfos = this.uploadService.getFiles();\n            }\n          },\n          error: (err: any) => {\n            console.log(err);\n            this.progress = 0;\n\n            if (err.error && err.error.message) {\n              this.message = err.error.message;\n            } else {\n              this.message = 'Could not upload the file!';\n            }\n\n            this.currentFile = undefined;\n          }\n        });\n      }\n\n      this.selectedFiles = undefined;\n    }\n  }\n\n}\n","<div class=\"div-main\">\n  <div class=\"title-page\">\n    <h2 style=\"color: #2eb165\">Consultation details</h2>\n  </div>\n\n  <div>\n    <div class=\"row\" style=\"margin-top: 20px;\">\n      <div class=\"col-8\">\n        <label class=\"btn btn-default p-0\">\n          <input type=\"file\" (change)=\"selectFile($event)\" class=\"form-control\" />\n        </label>\n      </div>\n\n      <div class=\"col-4\">\n        <button\n          class=\"btn btn-success btn-sm\"\n          [disabled]=\"!selectedFiles\"\n          (click)=\"upload()\"\n        >\n          Upload\n        </button>\n      </div>\n    </div>\n\n    <div *ngIf=\"currentFile\" class=\"progress my-3\">\n      <div\n        class=\"progress-bar progress-bar-info\"\n        role=\"progressbar\"\n        attr.aria-valuenow=\"{{ progress }}\"\n        aria-valuemin=\"0\"\n        aria-valuemax=\"100\"\n        [ngStyle]=\"{ width: progress + '%' }\"\n      >\n        {{ progress }}%\n      </div>\n    </div>\n\n    <div *ngIf=\"message\" class=\"alert alert-secondary\" role=\"alert\">\n      {{ message }}\n    </div>\n\n    <div class=\"card mt-3\">\n      <div class=\"card-header\">Download the file</div>\n      <ul\n        class=\"list-group list-group-flush\"\n        *ngFor=\"let file of fileInfos | async\"\n      >\n        <li class=\"list-group-item\">\n          <a href=\"http://localhost:8081/download/{{ file }}\">{{ file }}</a>\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>\n\n\n"]},"metadata":{},"sourceType":"module"}